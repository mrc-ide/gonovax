{"version":"1.0.3","config":{"base":"dualvax","include":[]},"meta":{"internal":"internal","user":"user","state":"state","result":"dstatedt","output":"output","time":"t","initial_time":"initial_t"},"features":{"discrete":false,"has_array":true,"has_output":true,"has_user":true,"has_delay":false,"has_interpolate":false,"has_stochastic":false,"has_include":false,"initial_time_dependent":false},"data":{"elements":[{"name":"A","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_A","dim":null,"mult":null}},{"name":"beta","location":"internal","storage_type":"double","rank":0,"dimnames":null},{"name":"C","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_C","dim":null,"mult":null}},{"name":"dim_A","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_C","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_enr","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_foi","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_I","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_lambda","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_lambda_1","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_lambda_2","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_m","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_m_1","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_m_2","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_N","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_Np","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_p","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_S","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_T","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"dim_U","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"enr","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_enr","dim":null,"mult":null}},{"name":"epsilon","location":"internal","storage_type":"double","rank":0,"dimnames":null},{"name":"eta","location":"internal","storage_type":"double","rank":0,"dimnames":null},{"name":"exr","location":"internal","storage_type":"double","rank":0,"dimnames":null},{"name":"foi","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_foi","dim":null,"mult":null}},{"name":"I","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_I","dim":null,"mult":null}},{"name":"initial_A","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_A","dim":null,"mult":null}},{"name":"initial_I","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_I","dim":null,"mult":null}},{"name":"initial_S","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_S","dim":null,"mult":null}},{"name":"initial_T","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_T","dim":null,"mult":null}},{"name":"initial_U","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_U","dim":null,"mult":null}},{"name":"lambda","location":"internal","storage_type":"double","rank":2,"dimnames":{"length":"dim_lambda","dim":["dim_lambda_1","dim_lambda_2"],"mult":["","dim_lambda_1"]}},{"name":"m","location":"internal","storage_type":"double","rank":2,"dimnames":{"length":"dim_m","dim":["dim_m_1","dim_m_2"],"mult":["","dim_m_1"]}},{"name":"mu","location":"internal","storage_type":"double","rank":0,"dimnames":null},{"name":"N","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_N","dim":null,"mult":null}},{"name":"n_group","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"Np","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_Np","dim":null,"mult":null}},{"name":"nu","location":"internal","storage_type":"double","rank":0,"dimnames":null},{"name":"offset_output_m","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"offset_variable_A","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"offset_variable_S","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"offset_variable_T","location":"internal","storage_type":"int","rank":0,"dimnames":null},{"name":"p","location":"internal","storage_type":"double","rank":1,"dimnames":{"length":"dim_p","dim":null,"mult":null}},{"name":"psi","location":"internal","storage_type":"double","rank":0,"dimnames":null},{"name":"rho","location":"internal","storage_type":"double","rank":0,"dimnames":null},{"name":"S","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_S","dim":null,"mult":null}},{"name":"sigma","location":"internal","storage_type":"double","rank":0,"dimnames":null},{"name":"T","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_T","dim":null,"mult":null}},{"name":"U","location":"variable","storage_type":"double","rank":1,"dimnames":{"length":"dim_U","dim":null,"mult":null}}],"variable":{"length":["+",["+",["+",["+","dim_U","dim_I"],"dim_A"],"dim_S"],"dim_T"],"contents":[{"name":"U","offset":0,"initial":"initial_U"},{"name":"I","offset":"dim_U","initial":"initial_I"},{"name":"A","offset":"offset_variable_A","initial":"initial_A"},{"name":"S","offset":"offset_variable_S","initial":"initial_S"},{"name":"T","offset":"offset_variable_T","initial":"initial_T"}]},"output":{"length":["+",["+","dim_N","dim_foi"],"dim_m"],"contents":[{"name":"N","offset":0},{"name":"foi","offset":"dim_N"},{"name":"m","offset":"offset_output_m"}]}},"equations":[{"name":"alloc_C","type":"alloc","source":[48],"depends":{"functions":[],"variables":["dim_C"]},"lhs":"C"},{"name":"alloc_foi","type":"alloc","source":[54],"depends":{"functions":[],"variables":["dim_foi"]},"lhs":"foi"},{"name":"alloc_initial_A","type":"alloc","source":[44],"depends":{"functions":[],"variables":["dim_A"]},"lhs":"initial_A"},{"name":"alloc_initial_I","type":"alloc","source":[43],"depends":{"functions":[],"variables":["dim_I"]},"lhs":"initial_I"},{"name":"alloc_initial_S","type":"alloc","source":[45],"depends":{"functions":[],"variables":["dim_S"]},"lhs":"initial_S"},{"name":"alloc_initial_T","type":"alloc","source":[46],"depends":{"functions":[],"variables":["dim_T"]},"lhs":"initial_T"},{"name":"alloc_initial_U","type":"alloc","source":[42],"depends":{"functions":[],"variables":["dim_U"]},"lhs":"initial_U"},{"name":"alloc_lambda","type":"alloc","source":[53],"depends":{"functions":[],"variables":["dim_lambda"]},"lhs":"lambda"},{"name":"alloc_m","type":"alloc","source":[52],"depends":{"functions":[],"variables":["dim_m"]},"lhs":"m"},{"name":"alloc_N","type":"alloc","source":[49],"depends":{"functions":[],"variables":["dim_N"]},"lhs":"N"},{"name":"alloc_Np","type":"alloc","source":[50],"depends":{"functions":[],"variables":["dim_Np"]},"lhs":"Np"},{"name":"beta","type":"user","source":[59],"depends":null,"lhs":"beta","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"C","type":"expression_array","source":[23],"depends":{"functions":["length","+","["],"variables":["dim_C","I","i","A","S","alloc_C"]},"lhs":"C","rhs":[{"index":[{"value":[":",1,["length","C"]],"is_range":true,"index":"i"}],"value":["+",["+",["[","I","i"],["[","A","i"]],["[","S","i"]]}]},{"name":"deriv_A","type":"expression_array","source":[18],"depends":{"functions":["length","-","*","(","[","+"],"variables":["dim_A","psi","sigma","I","i","eta","nu","exr","A"]},"lhs":"A","rhs":[{"index":[{"value":[":",1,["length","A"]],"is_range":true,"index":"i"}],"value":["-",["*",["*",["(",["-",1,"psi"]],"sigma"],["[","I","i"]],["*",["(",["+",["+","eta","nu"],"exr"]],["[","A","i"]]]}]},{"name":"deriv_I","type":"expression_array","source":[17],"depends":{"functions":["length","-","*","[","(","+"],"variables":["dim_I","foi","i","U","sigma","exr","I"]},"lhs":"I","rhs":[{"index":[{"value":[":",1,["length","I"]],"is_range":true,"index":"i"}],"value":["-",["*",["[","foi","i"],["[","U","i"]],["*",["(",["+","sigma","exr"]],["[","I","i"]]]}]},{"name":"deriv_S","type":"expression_array","source":[19],"depends":{"functions":["length","-","*","[","(","+"],"variables":["dim_S","psi","sigma","I","i","mu","exr","S"]},"lhs":"S","rhs":[{"index":[{"value":[":",1,["length","S"]],"is_range":true,"index":"i"}],"value":["-",["*",["*","psi","sigma"],["[","I","i"]],["*",["(",["+","mu","exr"]],["[","S","i"]]]}]},{"name":"deriv_T","type":"expression_array","source":[20],"depends":{"functions":["length","-","+","*","[","("],"variables":["dim_T","mu","S","i","eta","A","rho","exr","T"]},"lhs":"T","rhs":[{"index":[{"value":[":",1,["length","T"]],"is_range":true,"index":"i"}],"value":["-",["+",["*","mu",["[","S","i"]],["*","eta",["[","A","i"]]],["*",["(",["+","rho","exr"]],["[","T","i"]]]}]},{"name":"deriv_U","type":"expression_array","source":[16],"depends":{"functions":["length","+","-","[","*","("],"variables":["dim_U","enr","i","foi","exr","U","nu","A","rho","T"]},"lhs":"U","rhs":[{"index":[{"value":[":",1,["length","U"]],"is_range":true,"index":"i"}],"value":["+",["+",["-",["[","enr","i"],["*",["(",["+",["[","foi","i"],"exr"]],["[","U","i"]]],["*","nu",["[","A","i"]]],["*","rho",["[","T","i"]]]}]},{"name":"dim_A","type":"expression_scalar","source":[44],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_A","rhs":{"value":"n_group"}},{"name":"dim_C","type":"expression_scalar","source":[48],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_C","rhs":{"value":"n_group"}},{"name":"dim_enr","type":"expression_scalar","source":[69],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_enr","rhs":{"value":"n_group"}},{"name":"dim_foi","type":"expression_scalar","source":[54],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_foi","rhs":{"value":"n_group"}},{"name":"dim_I","type":"expression_scalar","source":[43],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_I","rhs":{"value":"n_group"}},{"name":"dim_lambda","type":"expression_scalar","source":[53],"depends":{"functions":[],"variables":["dim_lambda_1","dim_lambda_2"]},"lhs":"dim_lambda","rhs":{"value":["*","dim_lambda_1","dim_lambda_2"]}},{"name":"dim_lambda_1","type":"expression_scalar","source":[53],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_lambda_1","rhs":{"value":"n_group"}},{"name":"dim_lambda_2","type":"expression_scalar","source":[53],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_lambda_2","rhs":{"value":"n_group"}},{"name":"dim_m","type":"expression_scalar","source":[52],"depends":{"functions":[],"variables":["dim_m_1","dim_m_2"]},"lhs":"dim_m","rhs":{"value":["*","dim_m_1","dim_m_2"]}},{"name":"dim_m_1","type":"expression_scalar","source":[52],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_m_1","rhs":{"value":"n_group"}},{"name":"dim_m_2","type":"expression_scalar","source":[52],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_m_2","rhs":{"value":"n_group"}},{"name":"dim_N","type":"expression_scalar","source":[49],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_N","rhs":{"value":"n_group"}},{"name":"dim_Np","type":"expression_scalar","source":[50],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_Np","rhs":{"value":"n_group"}},{"name":"dim_p","type":"expression_scalar","source":[70],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_p","rhs":{"value":"n_group"}},{"name":"dim_S","type":"expression_scalar","source":[45],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_S","rhs":{"value":"n_group"}},{"name":"dim_T","type":"expression_scalar","source":[46],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_T","rhs":{"value":"n_group"}},{"name":"dim_U","type":"expression_scalar","source":[42],"depends":{"functions":[],"variables":["n_group"]},"lhs":"dim_U","rhs":{"value":"n_group"}},{"name":"enr","type":"user","source":[57],"depends":{"functions":["length"],"variables":["dim_enr"]},"lhs":"enr","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"epsilon","type":"user","source":[61],"depends":null,"lhs":"epsilon","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"eta","type":"user","source":[64],"depends":null,"lhs":"eta","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"exr","type":"user","source":[58],"depends":null,"lhs":"exr","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"foi","type":"expression_array","source":[30],"depends":{"functions":["length","*","[","odin_sum","dim"],"variables":["dim_foi","beta","p","i","lambda","dim_lambda","alloc_foi"]},"lhs":"foi","rhs":[{"index":[{"value":[":",1,["length","foi"]],"is_range":true,"index":"i"}],"value":["*",["*","beta",["[","p","i"]],["odin_sum","lambda","i","i",1,["dim","lambda",2]]]}]},{"name":"initial_A","type":"expression_array","source":[37],"depends":{"functions":["length"],"variables":["dim_A"]},"lhs":"initial_A","rhs":[{"index":[{"value":[":",1,["length","A"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"initial_I","type":"expression_array","source":[36],"depends":{"functions":["length"],"variables":["dim_I"]},"lhs":"initial_I","rhs":[{"index":[{"value":[":",1,["length","I"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"initial_S","type":"expression_array","source":[38],"depends":{"functions":["length"],"variables":["dim_S"]},"lhs":"initial_S","rhs":[{"index":[{"value":[":",1,["length","S"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"initial_T","type":"expression_array","source":[39],"depends":{"functions":["length"],"variables":["dim_T"]},"lhs":"initial_T","rhs":[{"index":[{"value":[":",1,["length","T"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"initial_U","type":"expression_array","source":[35],"depends":{"functions":["length"],"variables":["dim_U"]},"lhs":"initial_U","rhs":[{"index":[{"value":[":",1,["length","U"]],"is_range":true,"index":"i"}],"value":0}]},{"name":"lambda","type":"expression_array","source":[29],"depends":{"functions":["dim","/","*","["],"variables":["dim_lambda","m","i","j","C","N","alloc_lambda"]},"lhs":"lambda","rhs":[{"index":[{"value":[":",1,["dim","lambda",1]],"is_range":true,"index":"i"},{"value":[":",1,["dim","lambda",2]],"is_range":true,"index":"j"}],"value":["/",["*",["[","m","i","j"],["[","C","j"]],["[","N","j"]]}]},{"name":"m","type":"expression_array","source":[28],"depends":{"functions":["dim","+","*","(","==","/","-","[","sum"],"variables":["dim_m","epsilon","i","j","p","N","Np","alloc_m"]},"lhs":"m","rhs":[{"index":[{"value":[":",1,["dim","m",1]],"is_range":true,"index":"i"},{"value":[":",1,["dim","m",2]],"is_range":true,"index":"j"}],"value":["+",["*","epsilon",["(",["==","i","j"]]],["/",["*",["*",["(",["-",1,"epsilon"]],["[","p","j"]],["[","N","j"]],["sum","Np"]]]}]},{"name":"mu","type":"user","source":[66],"depends":null,"lhs":"mu","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"N","type":"expression_array","source":[24],"depends":{"functions":["length","+","["],"variables":["dim_N","U","i","C","T","alloc_N"]},"lhs":"N","rhs":[{"index":[{"value":[":",1,["length","N"]],"is_range":true,"index":"i"}],"value":["+",["+",["[","U","i"],["[","C","i"]],["[","T","i"]]}]},{"name":"n_group","type":"expression_scalar","source":[11],"depends":null,"lhs":"n_group","rhs":{"value":2}},{"name":"Np","type":"expression_array","source":[27],"depends":{"functions":["length","*","["],"variables":["dim_Np","N","i","p","alloc_Np"]},"lhs":"Np","rhs":[{"index":[{"value":[":",1,["length","Np"]],"is_range":true,"index":"i"}],"value":["*",["[","N","i"],["[","p","i"]]}]},{"name":"nu","type":"user","source":[65],"depends":null,"lhs":"nu","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"offset_output_m","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_N","dim_foi"]},"lhs":"offset_output_m","rhs":{"value":["+","dim_N","dim_foi"]}},{"name":"offset_variable_A","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_U","dim_I"]},"lhs":"offset_variable_A","rhs":{"value":["+","dim_U","dim_I"]}},{"name":"offset_variable_S","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_U","dim_I","dim_A"]},"lhs":"offset_variable_S","rhs":{"value":["+",["+","dim_U","dim_I"],"dim_A"]}},{"name":"offset_variable_T","type":"expression_scalar","source":[],"depends":{"functions":["+"],"variables":["dim_U","dim_I","dim_A","dim_S"]},"lhs":"offset_variable_T","rhs":{"value":["+",["+",["+","dim_U","dim_I"],"dim_A"],"dim_S"]}},{"name":"output_foi","type":"copy","source":[74],"depends":{"functions":[],"variables":["foi"]},"lhs":"foi"},{"name":"output_m","type":"copy","source":[73],"depends":{"functions":[],"variables":["m"]},"lhs":"m"},{"name":"output_N","type":"copy","source":[72],"depends":{"functions":[],"variables":["N"]},"lhs":"N"},{"name":"p","type":"user","source":[60],"depends":{"functions":["length"],"variables":["dim_p"]},"lhs":"p","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"psi","type":"user","source":[63],"depends":null,"lhs":"psi","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"rho","type":"user","source":[67],"depends":null,"lhs":"rho","user":{"default":null,"dim":false,"min":null,"max":null}},{"name":"sigma","type":"user","source":[62],"depends":null,"lhs":"sigma","user":{"default":null,"dim":false,"min":null,"max":null}}],"components":{"create":{"variables":[],"equations":["n_group","dim_A","dim_C","dim_enr","dim_foi","dim_I","dim_lambda_1","dim_lambda_2","dim_m_1","dim_m_2","dim_N","dim_Np","dim_p","dim_S","dim_T","dim_U","alloc_C","alloc_foi","alloc_initial_A","alloc_initial_I","alloc_initial_S","alloc_initial_T","alloc_initial_U","alloc_N","alloc_Np","dim_lambda","dim_m","initial_A","initial_I","initial_S","initial_T","initial_U","offset_output_m","offset_variable_A","offset_variable_S","offset_variable_T","alloc_lambda","alloc_m"]},"user":{"variables":[],"equations":["beta","epsilon","eta","exr","mu","nu","psi","rho","sigma","enr","p"]},"initial":{"variables":[],"equations":[]},"rhs":{"variables":["U","I","A","S","T"],"equations":["deriv_A","deriv_S","deriv_T","C","N","Np","m","lambda","foi","deriv_I","deriv_U"]},"output":{"variables":["U","I","A","S","T"],"equations":["C","N","Np","output_N","m","lambda","output_m","foi","output_foi"]}},"user":[{"name":"beta","has_default":false},{"name":"enr","has_default":false},{"name":"epsilon","has_default":false},{"name":"eta","has_default":false},{"name":"exr","has_default":false},{"name":"mu","has_default":false},{"name":"nu","has_default":false},{"name":"p","has_default":false},{"name":"psi","has_default":false},{"name":"rho","has_default":false},{"name":"sigma","has_default":false}],"interpolate":{"min":[],"max":[],"critical":[]},"source":["### Key to indices","## i for the parameter vector","## j for the activity group (low / high)","##  the compartments will then be replicated five times","### U: unvaccinated","### B: Bexsero","### X: Vaccine X","### D: Dual","### W: Waned","","n_group <- 2 ","","","## Core equations for transitions between compartments:","","deriv(U[]) <- enr[i]             - (foi[i]+exr)*U[i] + nu*A[i] + rho*T[i]","deriv(I[]) <- foi[i]*U[i]        - (sigma+exr)*I[i] ","deriv(A[]) <- (1-psi)*sigma*I[i] - (eta+nu+exr)*A[i]","deriv(S[]) <- psi*sigma*I[i]     - (mu+exr)*S[i]","deriv(T[]) <- mu*S[i] + eta*A[i] - (rho+exr)*T[i]","","## Update population size","C[] <- I[i] + A[i] + S[i] ","N[] <- U[i] + C[i] + T[i]","","# calculate mixing matrix, probability of infection and force of infection","Np[] <- N[i] * p[i]","m[, ] <- epsilon * (i==j) + (1-epsilon) * p[j] * N[j] / sum(Np)","lambda[, ] <- m[i, j] * C[j] / N[j]","foi[] <- beta * p[i] * sum(lambda[i, ])","","","## Set up compartments","## Initial states are all 0 as we will provide a state vector","initial(U[]) <- 0","initial(I[]) <- 0","initial(A[]) <- 0","initial(S[]) <- 0","initial(T[]) <- 0","","# set up dimensions of compartments","dim(U) <- n_group","dim(I) <- n_group","dim(A) <- n_group","dim(S) <- n_group","dim(T) <- n_group","","dim(C) <- n_group","dim(N) <- n_group","dim(Np) <- n_group","","dim(m) <- c(n_group, n_group)","dim(lambda) <- c(n_group, n_group)","dim(foi) <- c(n_group)","","## Parameters","enr[] <- user()","exr <- user()","beta <- user()","p[] <- user()","epsilon <- user()","sigma <- user()","psi <- user()","eta <- user()","nu <- user()","mu <- user()","rho <- user()","","dim(enr) <- n_group","dim(p) <- n_group","","output(N) <- N","output(m) <- m","output(foi) <- foi"]}
